# Python CircleCI 2.0 configuration file
#
# https://circleci.com/docs/2.0/hello-world-windows/#example-configuration-file
#
version: 2.1

orbs:
  win: circleci/windows@2.2.0

jobs:

  build-osquery:
    executor:
      name: win/default
    steps: # multiple shells in the same job
      - checkout
      - run: choco install osquery --params='/InstallService'
      - run: Start-service osqueryd
      - run: Get-Service | Where-Object {$_.name -eq “osqueryd”}

workflows:
  commit-parallel-workflow:
    jobs:
      - build-osquery
  scheduled-workflow:
    triggers:
      - schedule:        
          cron: "0,15,30,45 * * * *" # at minutes 0, 15, 30, 45
          # cron: "0 0 1 * *" # once a month
          filters:
            branches:
              only: 
              - master
    jobs:
      - build-osquery